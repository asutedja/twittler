<!--Features of Twitter are the following
Clicking on a hash tag makes a list of tweets with that hashtag  
Clicking on a handle makes a list of tweets made by the handle
Shows how long it has been since or when the tweet has been made
-->
<!DOCTYPE html>
<html>
  <head>
    <script src="jquery.js"></script>
    <script src="data_generator.js"></script>
  </head>
  <body>
  <tweet><div></div></tweet>
  <user><div></div></user>
  <hashtag></hashtag>
  
    <script>

      $(document).ready(function(){
        var $body = $('tweet');
        $body.html('');
        $body.prepend('<h1>Twittler</h1>');
        var index = streams.home.length - 1;
        while(index >= 0){
          var tweet = streams.home[index];
          var $tweet = $('<div></div>');
          $tweet.append(tweet.created_at.toLocaleTimeString() + ' <a class=user ' + tweet.user + '>@' + tweet.user + '</a>: ' + tweet.message);
          $tweet.appendTo($body);
          index -= 1;
        }

        $('.user').on('click',function(){
          var user = $(this).text().replace('@','');
          var $body = $('user')
          $body.prepend('<h1>@'+ user + '</h1>');
          $('tweet').hide();
          $('hastag').hide();
          var index = streams.users[user].length - 1;
          while(index >= 0){
            var tweet = streams.users[user][index];
            var $tweet = $('<div></div>');
            $tweet.prepend(tweet.created_at.toLocaleTimeString() + ' <a class=user ' + tweet.user + '>@' + tweet.user + '</a>: ' + tweet.message);
            $tweet.appendTo($body);
            index -= 1;
          }
        })
       $('.hashtag').on('click',function(){
          var hashtag = $(this).text();
          var $body = $('hashtag')
          $('tweet').hide();
          $('user').hide();
          $body.prepend('<h1>'+ hashtag + '</h1>');
          var collection = streams.users;
          var hashMessages = [];
          for(var key in collection){
            var index = collection[key].length -1;
            while(index >= 0){
              var check = collection[key][index];
              if (check.message.includes(hashtag)){
                check.user = key;
                hashMessages.push(check);

              }
              index -= 1;
            }
          } 
          index = hashMessages.length-1
          while(index >= 0){
            var tweet = hashMessages[index];
            var $tweet = $('<div></div>');
            $tweet.prepend(tweet.created_at.toLocaleTimeString() + ' @' + tweet.user + ' ' + tweet.message);
            $tweet.appendTo($body);
            index -= 1;
          }
        })
      });

    </script>
  </body>
</html>
